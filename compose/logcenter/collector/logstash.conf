input {
  ############# www #############
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.141/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www01"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.142/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www02"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.143/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www03"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.144/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www04"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.145/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www05"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.146/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www06"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.147/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www07"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.148/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www08"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.149/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www09"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.150/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www10"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.223/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www11"
    }
  }
  httpfile { 
    url => "http://205.157.102.187/logs/205.157.102.225/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "www"
      "server" => "www12"
    }
  }

  ############# bsd #############
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd01/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd01"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd02/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd02"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd03/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd03"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd04/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd04"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd05/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd05"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd06/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd06"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd07/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd07"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd08/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd08"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd09/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd09"
    }
  }
  httpfile { 
    url => "http://205.157.103.202/app/bsdprd10/logs/logs/SystemOut.log"
    interval => 3
    type => "was"
    codec => multiline {
      pattern => "^[^\[]"
      what => "previous"
      max_lines => 200
    }
    add_field => {
      "site" => "bsd"
      "server" => "bsd10"
    }
  }
}

filter {
  if "multiline_codec_max_lines_reached" in [tags] {
    drop {}
  }
}

output {
  rabbitmq {
    host => "mq"
    exchange => "was"
    exchange_type => "fanout"
    key => "logstash"
    workers => 3
    durable => false
    user => "mq"
    password => "mq"
  }
}
